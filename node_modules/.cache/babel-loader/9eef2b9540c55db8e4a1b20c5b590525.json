{"ast":null,"code":"import _objectSpread from \"F:\\\\React\\\\upwork\\\\test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"F:\\\\React\\\\upwork\\\\test\\\\src\\\\containers\\\\dashboard\\\\ads\\\\index.js\";\nimport React, { Component } from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport BackLink from \"../../../components/backline\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport AdsCard from \"../../../components/adscard\";\nimport { Grid } from \"@material-ui/core\";\nimport ExpansionPanel from \"@material-ui/core/ExpansionPanel\";\nimport ExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\";\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ErrorOutline from \"@material-ui/icons/ErrorOutline\";\nimport axios from \"axios\";\nimport config from \"../../../config/config\";\nimport { NotificationManager } from \"react-notifications\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport AddCircle from \"@material-ui/icons/AddCircle\";\nimport { connect } from \"react-redux\";\nimport t from \"../../../constants/language\";\n\nconst styles = theme => ({\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3)\n  },\n  toolbar: theme.mixins.toolbar,\n  formContainer: {\n    margin: 20,\n    width: 400,\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"flex-end\"\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 400\n  },\n  submitButton: {\n    marginTop: 10,\n    backgroundColor: \"#30a5ff\",\n    width: 60\n  },\n  expansionheading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n    textAlign: \"center\"\n  },\n  more: {// width: 60,\n    // margin:10\n  },\n  moreSummary: {\n    \"& div\": {\n      flexGrow: 0\n    }\n  },\n  leftIcon: {\n    marginRight: theme.spacing(1)\n  }\n});\n\nclass Ads extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getAdsInfo = () => {\n      axios.request({\n        url: \"/api/dashboard/ads\",\n        baseURL: config.apiBaseUrl,\n        method: \"get\"\n      }).then(res => {\n        console.log(\"get Ads\", res);\n        this.setState({\n          adsArray: res.data.adsArray\n        });\n      }).catch(err => {\n        console.log(\"get siblings\", err);\n      });\n    };\n\n    this.uploadAdsInfo = adsArray => {\n      axios.request({\n        url: \"/api/dashboard/ads\",\n        baseURL: config.apiBaseUrl,\n        method: \"POST\",\n        data: {\n          adsArray: adsArray\n        }\n      }).then(res => {\n        console.log(\"post ads\", res); // this.setState({ adsArray: res.data.adsArray });\n        // NotificationManager.success(t[this.props.lang].success);\n      }).catch(err => {\n        console.log(\"post adsArray\", err);\n        NotificationManager.error(t[this.props.lang].failed);\n      });\n    };\n\n    this.saveAdsInfo = (index, changedValue) => {\n      this.state.adsArray[index] = _objectSpread({}, this.state.adsArray[index], {}, changedValue);\n      this.setState({\n        adsArray: this.state.adsArray\n      }, function () {\n        this.uploadAdsInfo(this.state.adsArray);\n      });\n    };\n\n    this.deleteAdsInfo = index => {\n      this.state.adsArray[index] = _objectSpread({}, this.state.adsArray[index], {\n        status: \"deleted\"\n      });\n      this.setState({\n        adsArray: this.state.adsArray\n      }, function () {\n        this.uploadAdsInfo(this.state.adsArray);\n      });\n    };\n\n    this.restoreAdsInfo = index => {\n      this.state.adsArray[index] = _objectSpread({}, this.state.adsArray[index], {\n        status: \"active\"\n      });\n      this.setState({\n        adsArray: this.state.adsArray\n      }, function () {\n        this.uploadAdsInfo(this.state.adsArray);\n      });\n    };\n\n    this.addAdsInfo = newValue => {\n      this.state.adsArray.push(_objectSpread({}, newValue, {\n        status: \"active\"\n      }));\n      this.setState({\n        adsArray: this.state.adsArray\n      }, function () {\n        this.uploadAdsInfo(this.state.adsArray);\n      });\n    };\n\n    this.handleCreateButton = () => {\n      const initValue = {\n        adsType: \"\",\n        boatName: \"\",\n        arrivalDate: null,\n        leaveDate: null,\n        harbour: \"\",\n        //my harbour\n        destHarbour: \"\",\n        status: \"active\"\n      };\n      this.setState({\n        createAds: initValue,\n        isCreateDialog: true\n      });\n    };\n\n    this.handleCloseCreateDialog = () => {\n      this.setState({\n        isCreateDialog: false\n      });\n    };\n\n    this.handleCreateOne = () => {\n      const newValue = this.state.createAds;\n      this.addAdsInfo(newValue);\n    };\n\n    this.addNewAds = newValue => {\n      this.addAdsInfo(newValue);\n      this.setState({\n        isCreateDialog: false\n      });\n    };\n\n    this.state = {\n      adsArray: [],\n      isCreateDialog: false,\n      createAds: {}\n    };\n  }\n\n  componentDidMount() {\n    this.getAdsInfo();\n  }\n\n  render() {\n    const classes = this.props.classes;\n    const _this$state = this.state,\n          adsArray = _this$state.adsArray,\n          isCreateDialog = _this$state.isCreateDialog,\n          createAds = _this$state.createAds;\n    return React.createElement(\"main\", {\n      className: classes.content,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: classes.toolbar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, t[this.props.lang].ads_title), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, t[this.props.lang].ads_info), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }), React.createElement(ExpansionPanel, {\n      className: classes.more,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(ExpansionPanelSummary, {\n      className: classes.moreSummary,\n      expandIcon: React.createElement(ExpandMoreIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }) // aria-controls=\"panel1a-content\"\n      ,\n      id: \"expand-more\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, t[this.props.lang].more)), React.createElement(ExpansionPanelDetails, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, t[this.props.lang].ads_more))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }), React.createElement(Box, {\n      display: \"flex\",\n      justifyContent: \"center\",\n      m: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      size: \"large\",\n      className: classes.button,\n      onClick: this.handleCreateButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(AddCircle, {\n      className: classes.leftIcon,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }), t[this.props.lang].add)), React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justify: \"flex-start\",\n      spacing: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, adsArray && adsArray.map((item, index) => React.createElement(Grid, {\n      item: true,\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(AdsCard, {\n      adsIndex: index,\n      adsInfo: item,\n      saveAdsInfo: this.saveAdsInfo,\n      delete: this.deleteAdsInfo,\n      restore: this.restoreAdsInfo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    })))), React.createElement(BackLink, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }), React.createElement(Dialog, {\n      open: isCreateDialog,\n      onClose: this.handleCloseCreateDialog,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(DialogContent, {\n      style: {\n        padding: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, React.createElement(AdsCard, {\n      index: 0,\n      adsInfo: createAds,\n      saveAdsInfo: this.addNewAds,\n      createMode: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    lang: state.menu.lang\n  };\n};\n\nexport default connect(mapStateToProps)(withStyles(styles)(Ads));","map":{"version":3,"sources":["F:/React/upwork/test/src/containers/dashboard/ads/index.js"],"names":["React","Component","withStyles","Table","TableBody","TableCell","TableHead","TableRow","TextField","Button","BackLink","Typography","Box","AdsCard","Grid","ExpansionPanel","ExpansionPanelSummary","ExpansionPanelDetails","ExpandMoreIcon","ErrorOutline","axios","config","NotificationManager","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","AddCircle","connect","t","styles","theme","content","flexGrow","padding","spacing","toolbar","mixins","formContainer","margin","width","display","flexDirection","alignItems","textField","marginLeft","marginRight","submitButton","marginTop","backgroundColor","expansionheading","fontSize","typography","pxToRem","fontWeight","fontWeightRegular","textAlign","more","moreSummary","leftIcon","Ads","constructor","props","getAdsInfo","request","url","baseURL","apiBaseUrl","method","then","res","console","log","setState","adsArray","data","catch","err","uploadAdsInfo","error","lang","failed","saveAdsInfo","index","changedValue","state","deleteAdsInfo","status","restoreAdsInfo","addAdsInfo","newValue","push","handleCreateButton","initValue","adsType","boatName","arrivalDate","leaveDate","harbour","destHarbour","createAds","isCreateDialog","handleCloseCreateDialog","handleCreateOne","addNewAds","componentDidMount","render","classes","ads_title","ads_info","ads_more","button","add","map","item","mapStateToProps","menu"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport BackLink from \"../../../components/backline\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport AdsCard from \"../../../components/adscard\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport ExpansionPanel from \"@material-ui/core/ExpansionPanel\";\r\nimport ExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\";\r\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport ErrorOutline from \"@material-ui/icons/ErrorOutline\";\r\nimport axios from \"axios\";\r\nimport config from \"../../../config/config\";\r\nimport { NotificationManager } from \"react-notifications\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport AddCircle from \"@material-ui/icons/AddCircle\";\r\nimport { connect } from \"react-redux\";\r\nimport t from \"../../../constants/language\";\r\n\r\nconst styles = theme => ({\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3)\r\n  },\r\n\r\n  toolbar: theme.mixins.toolbar,\r\n\r\n  formContainer: {\r\n    margin: 20,\r\n    width: 400,\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"flex-end\"\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    width: 400\r\n  },\r\n\r\n  submitButton: {\r\n    marginTop: 10,\r\n    backgroundColor: \"#30a5ff\",\r\n    width: 60\r\n  },\r\n  expansionheading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    fontWeight: theme.typography.fontWeightRegular,\r\n    textAlign: \"center\"\r\n  },\r\n  more: {\r\n    // width: 60,\r\n    // margin:10\r\n  },\r\n  moreSummary: {\r\n    \"& div\": {\r\n      flexGrow: 0\r\n    }\r\n  },\r\n  leftIcon: {\r\n    marginRight: theme.spacing(1)\r\n  }\r\n});\r\n\r\nclass Ads extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      adsArray: [],\r\n      isCreateDialog: false,\r\n      createAds: {}\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getAdsInfo();\r\n  }\r\n\r\n  getAdsInfo = () => {\r\n    axios\r\n      .request({\r\n        url: \"/api/dashboard/ads\",\r\n        baseURL: config.apiBaseUrl,\r\n        method: \"get\"\r\n      })\r\n      .then(res => {\r\n        console.log(\"get Ads\", res);\r\n        this.setState({ adsArray: res.data.adsArray });\r\n      })\r\n      .catch(err => {\r\n        console.log(\"get siblings\", err);\r\n      });\r\n  };\r\n\r\n  uploadAdsInfo = adsArray => {\r\n    axios\r\n      .request({\r\n        url: \"/api/dashboard/ads\",\r\n        baseURL: config.apiBaseUrl,\r\n        method: \"POST\",\r\n        data: { adsArray: adsArray }\r\n      })\r\n      .then(res => {\r\n        console.log(\"post ads\", res);\r\n        // this.setState({ adsArray: res.data.adsArray });\r\n        // NotificationManager.success(t[this.props.lang].success);\r\n      })\r\n      .catch(err => {\r\n        console.log(\"post adsArray\", err);\r\n        NotificationManager.error(t[this.props.lang].failed);\r\n      });\r\n  };\r\n  saveAdsInfo = (index, changedValue) => {\r\n    this.state.adsArray[index] = {\r\n      ...this.state.adsArray[index],\r\n      ...changedValue\r\n    };\r\n    this.setState({ adsArray: this.state.adsArray }, function() {\r\n      this.uploadAdsInfo(this.state.adsArray);\r\n    });\r\n  };\r\n\r\n  deleteAdsInfo = index => {\r\n    this.state.adsArray[index] = {\r\n      ...this.state.adsArray[index],\r\n      status: \"deleted\"\r\n    };\r\n    this.setState({ adsArray: this.state.adsArray }, function() {\r\n      this.uploadAdsInfo(this.state.adsArray);\r\n    });\r\n  };\r\n\r\n  restoreAdsInfo = index => {\r\n    this.state.adsArray[index] = {\r\n      ...this.state.adsArray[index],\r\n      status: \"active\"\r\n    };\r\n    this.setState({ adsArray: this.state.adsArray }, function() {\r\n      this.uploadAdsInfo(this.state.adsArray);\r\n    });\r\n  };\r\n\r\n  addAdsInfo = newValue => {\r\n    this.state.adsArray.push({ ...newValue, status: \"active\" });\r\n    this.setState({ adsArray: this.state.adsArray }, function() {\r\n      this.uploadAdsInfo(this.state.adsArray);\r\n    });\r\n  };\r\n\r\n  handleCreateButton = () => {\r\n    const initValue = {\r\n      adsType: \"\",\r\n      boatName: \"\",\r\n      arrivalDate: null,\r\n      leaveDate: null,\r\n      harbour: \"\", //my harbour\r\n      destHarbour: \"\",\r\n      status: \"active\"\r\n    };\r\n    this.setState({ createAds: initValue, isCreateDialog: true });\r\n  };\r\n  handleCloseCreateDialog = () => {\r\n    this.setState({ isCreateDialog: false });\r\n  };\r\n  handleCreateOne = () => {\r\n    const newValue = this.state.createAds;\r\n    this.addAdsInfo(newValue);\r\n  };\r\n\r\n  addNewAds = newValue => {\r\n    this.addAdsInfo(newValue);\r\n    this.setState({ isCreateDialog: false });\r\n  };\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { adsArray, isCreateDialog, createAds } = this.state;\r\n    return (\r\n      <main className={classes.content}>\r\n        <div className={classes.toolbar} />\r\n        <h1>{t[this.props.lang].ads_title}</h1>\r\n        <p>{t[this.props.lang].ads_info}</p>\r\n        <br />\r\n        <ExpansionPanel className={classes.more}>\r\n          <ExpansionPanelSummary\r\n            className={classes.moreSummary}\r\n            expandIcon={<ExpandMoreIcon />}\r\n            // aria-controls=\"panel1a-content\"\r\n            id=\"expand-more\"\r\n          >\r\n            <Typography>{t[this.props.lang].more}</Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n            <Typography>{t[this.props.lang].ads_more}</Typography>\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n        <br />\r\n        <Box display=\"flex\" justifyContent=\"center\" m={2}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            className={classes.button}\r\n            onClick={this.handleCreateButton}\r\n          >\r\n            <AddCircle className={classes.leftIcon} />\r\n            {t[this.props.lang].add}\r\n          </Button>\r\n        </Box>\r\n        <Grid container direction=\"row\" justify=\"flex-start\" spacing={3}>\r\n          {adsArray &&\r\n            adsArray.map((item, index) => (\r\n              <Grid item key={index}>\r\n                <AdsCard\r\n                  adsIndex={index}\r\n                  adsInfo={item}\r\n                  saveAdsInfo={this.saveAdsInfo}\r\n                  delete={this.deleteAdsInfo}\r\n                  restore={this.restoreAdsInfo}\r\n                />\r\n              </Grid>\r\n            ))}\r\n        </Grid>\r\n\r\n        <BackLink />\r\n\r\n        <Dialog open={isCreateDialog} onClose={this.handleCloseCreateDialog}>\r\n          {/* <DialogTitle id=\"create-dialog-title\">New Ads</DialogTitle> */}\r\n          <DialogContent style={{ padding: 0 }}>\r\n            <AdsCard\r\n              index={0}\r\n              adsInfo={createAds}\r\n              saveAdsInfo={this.addNewAds}\r\n              createMode\r\n            />\r\n          </DialogContent>\r\n          {/* <DialogActions>\r\n            <Button onClick={this.handleEmailChange} color=\"primary\" />\r\n            <Button onClick={this.handlePasswordClose} color=\"primary\">\r\n              Cancel\r\n            </Button>\r\n          </DialogActions> */}\r\n        </Dialog>\r\n      </main>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    lang: state.menu.lang\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(Ads));\r\n"]},"metadata":{},"sourceType":"module"}